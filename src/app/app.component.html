<ng-template #loading>
  <router-outlet></router-outlet>
</ng-template>

<ng-template [ngIf]="!login" [ngIfElse]="loading">
  <div class="chat">
    <div class="chat-header">
      <div class="online-box">
        <div class="online-header"><strong>Online</strong></div>
        <ul class="list online-list">
          <li class="online-user" *ngFor="let user of users">
            <strong>{{ user }}</strong>
          </li>
        </ul>
      </div>
      <div class="user-box">
        <div class="user-dropdown-btn">
          <img [src]="currUser.avatar" alt="">
          <span class="user-arrow"></span>
        </div>
        <div class="user-menu">
          <div class="user-menu__header">
            {{ currUser.login }}
          </div>
          <div class="user-menu__list-wrapper">
            <ul class="list user-menu__list">
              <li class="user-menu__item">Edit Profile</li>
              <li class="user-menu__item">Logout</li>
            </ul>
          </div>
        </div>
      </div>
    </div>
      <div class="chat-body">
        <div class="chat-content" #mbox>
          <div class="message" *ngFor="let message of messages">
              <div class="message-info">
                <span class="message-time"> {{ message.date | date:'h:mm' }}</span>
                <span class="message-name">{{ message.nick }}:</span>
              </div>
              <p class="message-text" [innerHTML]="message.text"></p>
          </div>
        </div>

        <div class="chat-controls">
          <form class="chat-form" [formGroup]="chatForm" (submit)="sendMessage()">
            <textarea type="text" formControlName="text" (keydown)="enterTextarea($event)"></textarea>
            <button class="btn" type="submit">Send</button>
          </form>
        </div>
      </div>
  </div>
</ng-template>
